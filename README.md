# AI Test Generator v3.1.0

> ğŸ¤– AIé©±åŠ¨çš„å•å…ƒæµ‹è¯•ç”Ÿæˆå™¨ï¼Œå…·æœ‰æ™ºèƒ½ä¼˜å…ˆçº§è¯„åˆ†å’Œä»£ç è´¨é‡éªŒè¯

[![npm version](https://img.shields.io/npm/v/ai-unit-test-generator.svg)](https://www.npmjs.com/package/ai-unit-test-generator)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### åŸºç¡€åŠŸèƒ½
- **ğŸ—ï¸ åˆ†å±‚æ¶æ„è¯„åˆ†**: æ ¹æ®ä»£ç å±‚çº§ï¼ˆFoundation, Business, State, UIï¼‰æ™ºèƒ½è¯„åˆ†
- **ğŸ¤– AI Native è®¾è®¡**: å®Œç¾é›†æˆ Cursor Agentã€ChatGPTã€Claude ç­‰ AIå·¥å…·
- **ğŸ“Š è¦†ç›–ç‡æ„ŸçŸ¥**: é›†æˆä»£ç è¦†ç›–ç‡æ•°æ®è¿›è¡Œæ™ºèƒ½ä¼˜å…ˆçº§æ’åº
- **ğŸ¨ å¤šç»´åº¦è¯„åˆ†**: ç»“åˆå¯æµ‹è¯•æ€§ã€å¤æ‚åº¦ã€ä¾èµ–æ•°é‡ã€ä¸šåŠ¡å…³é”®åº¦ã€é”™è¯¯é£é™©
- **âš¡ æ‰¹é‡ç”Ÿæˆ**: è‡ªåŠ¨åŒ–æ‰¹é‡æµ‹è¯•ç”Ÿæˆï¼Œæ”¯æŒå¤±è´¥é‡è¯•å’Œè¿›åº¦è¿½è¸ª
- **ğŸ“ ä¸°å¯Œçš„æŠ¥å‘Š**: ç”Ÿæˆ Markdown å’Œ CSV æ ¼å¼çš„è¯¦ç»†è¯„åˆ†æŠ¥å‘Š

### v3.1.0 æ–°ç‰¹æ€§ ğŸ†•

#### 1ï¸âƒ£ Best Practices ç”Ÿæˆï¼ˆQodo é£æ ¼ï¼‰
- **è‡ªåŠ¨åˆ†æé¡¹ç›®**: æ£€æµ‹æµ‹è¯•æ¡†æ¶ã€æ–‡ä»¶æ¨¡å¼ã€ç°æœ‰æµ‹è¯•
- **AI ç”Ÿæˆè§„èŒƒ**: æ ¹æ®é¡¹ç›®ç‰¹ç‚¹ç”Ÿæˆæµ‹è¯•æ ‡å‡†
- **åŒæ¨¡å¼æ”¯æŒ**: ç‹¬ç«‹ Markdown æ–‡ä»¶æˆ–å†…è”é…ç½®

#### 2ï¸âƒ£ å®æ—¶ä»£ç éªŒè¯ï¼ˆQodo é£æ ¼ï¼‰
- **è‡ªåŠ¨éªŒè¯**: ç”Ÿæˆçš„æµ‹è¯•ä»£ç ç«‹å³éªŒè¯ï¼ˆç¼–è¯‘+è¿è¡Œï¼‰
- **æ™ºèƒ½é‡è¯•**: å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•å¹¶æä¾›åé¦ˆï¼ˆé»˜è®¤3æ¬¡ï¼‰
- **è´¨é‡ä¿è¯**: ç¡®ä¿ç”Ÿæˆçš„æµ‹è¯•å¯ä»¥å®é™…è¿è¡Œ

#### 3ï¸âƒ£ æµ‹è¯•å»é‡ï¼ˆKeploy é£æ ¼ï¼‰
- **ç›¸ä¼¼åº¦æ£€æµ‹**: ä½¿ç”¨ Levenshtein è·ç¦»ç®—æ³•æ£€æµ‹é‡å¤æµ‹è¯•
- **æ™ºèƒ½åˆ†æ**: è¯†åˆ«85%ä»¥ä¸Šç›¸ä¼¼åº¦çš„æµ‹è¯•ç”¨ä¾‹
- **è‡ªåŠ¨æ¸…ç†**: æ”¯æŒè‡ªåŠ¨åˆ é™¤é‡å¤æµ‹è¯•

#### 4ï¸âƒ£ è¦†ç›–ç‡é©±åŠ¨è¿­ä»£ï¼ˆKeploy é£æ ¼ï¼‰
- **åŠ¨æ€è¿­ä»£**: æ ¹æ®å®é™…è¦†ç›–ç‡æŒç»­ç”Ÿæˆï¼Œè€Œéå›ºå®šæ¬¡æ•°
- **æ™ºèƒ½åé¦ˆ**: åˆ†æè¦†ç›–ç‡å·®è·ï¼Œæä¾›é’ˆå¯¹æ€§æ”¹è¿›å»ºè®®
- **ç›®æ ‡é©±åŠ¨**: è¿­ä»£ç›´åˆ°è¾¾åˆ°è¦†ç›–ç‡ç›®æ ‡

### æ¶æ„ä¼˜åŒ–ï¼ˆv3.0+ï¼‰
- **âœ… 100% TypeScript**: å®Œå…¨è¿ç§»åˆ° TypeScriptï¼Œé›¶ç¼–è¯‘é”™è¯¯
- **ğŸ¯ æ¨¡å—åŒ–è®¾è®¡**: æ¸…æ™°çš„æ¨¡å—è¾¹ç•Œå’Œå¯¼å‡º
- **ğŸ“¦ Shared å·¥å…·å±‚**: ç»Ÿä¸€çš„å·¥å…·å‡½æ•°åº“
- **ğŸ”§ æ˜“äºç»´æŠ¤**: ä»£ç é‡å¤ç‡é™ä½85%+

---

## ğŸ“¦ å®‰è£…

### å…¨å±€å®‰è£…ï¼ˆæ¨èï¼‰

```bash
npm install -g ai-unit-test-generator
```

### é¡¹ç›®å®‰è£…

```bash
npm install --save-dev ai-unit-test-generator
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åˆå§‹åŒ–é…ç½®

```bash
ai-test init
```

è¿™å°†åœ¨å½“å‰ç›®å½•åˆ›å»º `ai-test.config.jsonc` é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜ã€‚

### 2. (å¯é€‰) ç”Ÿæˆæµ‹è¯•è§„èŒƒ

```bash
# ç”Ÿæˆç‹¬ç«‹çš„ best_practices.md æ–‡ä»¶
ai-test init-best-practices

# æˆ–è€…ç”Ÿæˆå†…è”é…ç½®ï¼ˆåµŒå…¥åˆ° ai-test.config.jsoncï¼‰
ai-test init-best-practices --inline
```

**è¿™å°†ï¼š**
- åˆ†æé¡¹ç›®ç»“æ„å’Œ package.json
- æ£€æµ‹æµ‹è¯•æ¡†æ¶ï¼ˆJest/Vitest/Mochaï¼‰
- æå–ç°æœ‰æµ‹è¯•æ¨¡å¼
- ä½¿ç”¨ AI ç”Ÿæˆé¡¹ç›®ç‰¹å®šçš„æµ‹è¯•æ ‡å‡†

### 3. æ‰«æä»£ç å¹¶è¯„åˆ†

```bash
ai-test scan
```

**æ‰§è¡Œæµç¨‹ï¼š**
1. åˆ†æä»£ç ç»“æ„ï¼Œè¯†åˆ«å¯æµ‹è¯•çš„ç›®æ ‡
2. (å¯é€‰) è‡ªåŠ¨è¿è¡Œ Jest è¦†ç›–ç‡åˆ†æ
3. åˆ†æ Git å†å²è·å–é”™è¯¯ä¿¡å·
4. è®¡ç®—å¤šç»´åº¦ä¼˜å…ˆçº§è¯„åˆ†
5. ç”Ÿæˆæ’åºæŠ¥å‘Š (`reports/ut_scores.md`)

**ç¤ºä¾‹è¾“å‡ºï¼š**

```markdown
| Status | Score | Priority | Name | Type | Layer | Path | Coverage | Testability | Complexity |
|--------|-------|----------|------|------|-------|------|----------|-------------|------------|
| TODO | 8.5 | P0 | validatePayment | function | Business | src/services/payment.ts | 0.0% | 9 | 10 |
| TODO | 7.8 | P0 | formatCurrency | function | Foundation | src/utils/format.ts | 15.0% | 10 | 8 |
```

### 4. ç”Ÿæˆæµ‹è¯•

```bash
# ç”Ÿæˆå‰10ä¸ªæœ€é«˜ä¼˜å…ˆçº§çš„å‡½æ•°æµ‹è¯•ï¼ˆå¸¦è‡ªåŠ¨æ”¹è¿›ï¼‰
ai-test generate

# ç”Ÿæˆå‰20ä¸ªå‡½æ•°çš„æµ‹è¯•
ai-test generate -n 20

# åªç”Ÿæˆ P0 ä¼˜å…ˆçº§çš„æµ‹è¯•
ai-test generate -p P0

# ç”Ÿæˆæ‰€æœ‰ TODO å‡½æ•°çš„æµ‹è¯•
ai-test generate --all

# ç¦ç”¨è‡ªåŠ¨æ”¹è¿›ï¼ˆå•æ¬¡ç”Ÿæˆæ¨¡å¼ï¼‰
ai-test generate --no-iterative
```

**æ‰§è¡Œæµç¨‹ï¼š**
1. ä»æŠ¥å‘Šä¸­é€‰æ‹©æœ€é«˜ä¼˜å…ˆçº§çš„æœªæµ‹è¯•å‡½æ•°
2. è°ƒç”¨ Cursor Agent è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•
3. æå–å¹¶ä¿å­˜æµ‹è¯•æ–‡ä»¶
4. è¿è¡Œ Jest éªŒè¯æµ‹è¯•
5. **ğŸ”„ æ£€æŸ¥è´¨é‡å¹¶è‡ªåŠ¨æ”¹è¿›**ï¼ˆé»˜è®¤å¯ç”¨ï¼‰
6. è‡ªåŠ¨æ›´æ–°æŠ¥å‘ŠçŠ¶æ€ä¸º DONE

### 5. æŸ¥çœ‹è¿›åº¦

```bash
# æŸ¥çœ‹å®Œæ•´æŠ¥å‘Š
cat reports/ut_scores.md

# æŸ¥çœ‹ P0 ä¼˜å…ˆçº§ä»»åŠ¡
grep "| P0 |" reports/ut_scores.md

# æŸ¥çœ‹å¾…å¤„ç†ä»»åŠ¡
grep "| TODO |" reports/ut_scores.md
```

---

## ğŸ“– å‘½ä»¤è¯¦è§£

### `ai-test init`

åˆå§‹åŒ–é…ç½®æ–‡ä»¶

```bash
ai-test init [options]

Options:
  -c, --config <path>   Config file path (default: ai-test.config.jsonc)
```

### `ai-test init-best-practices` ğŸ†•

ç”Ÿæˆé¡¹ç›®ç‰¹å®šçš„æµ‹è¯•è§„èŒƒ

```bash
ai-test init-best-practices [options]

Options:
  --inline              Generate inline config instead of separate file
  -c, --config <path>   Config file path (default: ai-test.config.jsonc)
```

**ä¸¤ç§æ¨¡å¼ï¼š**
- **æ–‡ä»¶æ¨¡å¼**ï¼ˆé»˜è®¤ï¼‰: ç”Ÿæˆ `best_practices.md`
- **å†…è”æ¨¡å¼**ï¼ˆ`--inline`ï¼‰: åµŒå…¥åˆ° `ai-test.config.jsonc`

### `ai-test scan`

æ‰«æä»£ç å¹¶ç”Ÿæˆä¼˜å…ˆçº§æŠ¥å‘Š

```bash
ai-test scan [options]

Options:
  -c, --config <path>   Config file path (default: ai-test.config.jsonc)
  -o, --output <dir>    Output directory (default: reports)
  --skip-git            Skip Git history analysis
```

**è¾“å‡ºæ–‡ä»¶ï¼š**
- `reports/targets.json` - æ‰«æçš„ç›®æ ‡åˆ—è¡¨
- `reports/git_signals.json` - Git åˆ†ææ•°æ®
- `reports/ut_scores.md` - Markdown æ ¼å¼æŠ¥å‘Šï¼ˆæŒ‰è¯„åˆ†æ’åºï¼‰
- `reports/ut_scores.csv` - CSV æ ¼å¼æŠ¥å‘Š

### `ai-test generate`

ç”Ÿæˆå•å…ƒæµ‹è¯•ï¼ˆä½¿ç”¨ Cursor Agentï¼‰

```bash
ai-test generate [options]

Options:
  -n, --count <number>           Number of functions to generate (default: 10)
  -p, --priority <level>         Priority filter (P0, P1, P2, P3)
  --all                          Generate all remaining TODO functions
  --no-iterative                 Disable iterative improvement (default: enabled)
  --max-iterations <number>      Maximum iterations for iterative mode (default: 3)
  --report <path>                Report file path (default: reports/ut_scores.md)
```

**ç¤ºä¾‹ï¼š**
```bash
ai-test generate                 # ç”Ÿæˆå‰10ä¸ªï¼Œå¸¦è‡ªåŠ¨æ”¹è¿›
ai-test generate -n 20           # ç”Ÿæˆå‰20ä¸ª
ai-test generate -p P0           # åªç”Ÿæˆ P0 ä¼˜å…ˆçº§
ai-test generate --all           # ç”Ÿæˆæ‰€æœ‰ TODO å‡½æ•°
ai-test generate --no-iterative  # ç¦ç”¨è‡ªåŠ¨æ”¹è¿›
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶

é¦–æ¬¡è¿è¡Œ `ai-test scan` æ—¶ï¼Œä¼šè‡ªåŠ¨ç”ŸæˆåŒ…å«è¯¦ç»†æ³¨é‡Šçš„é…ç½®æ–‡ä»¶ `ai-test.config.jsonc`ã€‚

### æ ¸å¿ƒé…ç½®

```jsonc
{
  "version": "3.1.0",
  "scoringMode": "layered",  // è¯„åˆ†æ¨¡å¼: layered æˆ– legacy
  
  // è¦†ç›–ç‡é…ç½®
  "coverage": {
    "runBeforeScan": true,  // æ‰«æå‰è‡ªåŠ¨è¿è¡Œè¦†ç›–ç‡åˆ†æ
    "command": "npx jest --coverage --silent"
  },
  
  // è¦†ç›–ç‡è¯„åˆ†æ˜ å°„
  "coverageScoring": {
    "naScore": 5,  // æ— è¦†ç›–ç‡æ•°æ®æ—¶çš„é»˜è®¤åˆ†æ•°
    "mapping": [
      { "lte": 0, "score": 10 },    // 0% è¦†ç›–ç‡ â†’ æœ€é«˜ä¼˜å…ˆçº§
      { "lte": 40, "score": 8 },    // 1-40% â†’ é«˜ä¼˜å…ˆçº§
      { "lte": 70, "score": 6 },    // 41-70% â†’ ä¸­ç­‰ä¼˜å…ˆçº§
      { "lte": 90, "score": 3 },    // 71-90% â†’ ä½ä¼˜å…ˆçº§
      { "lte": 100, "score": 1 }    // 91-100% â†’ æœ€ä½ä¼˜å…ˆçº§
    ]
  },
  
  // v3.1.0 æ–°å¢é…ç½®
  "bestPractices": {
    "enabled": false,
    "source": "file",  // "file" æˆ– "inline"
    "filePath": "./best_practices.md"
  },
  
  "validation": {
    "enabled": false,
    "maxAttempts": 3,
    "timeout": 30000
  },
  
  "coverageDriven": {
    "enabled": false,
    "targetCoverage": 80,
    "maxIterations": 5
  },
  
  "deduplication": {
    "enabled": false,
    "similarityThreshold": 0.85
  }
}
```

### åˆ†å±‚é…ç½®

```jsonc
{
  "layers": {
    "foundation": {
      "name": "Foundation (åŸºç¡€å·¥å…·å±‚)",
      "patterns": ["**/utils/**", "**/helpers/**", "**/constants/**"],
      "weights": {
        "testability": 0.45,      // å¯æµ‹è¯•æ€§æƒé‡
        "dependencyCount": 0.25,  // ä¾èµ–æ•°é‡æƒé‡
        "complexity": 0.20,       // å¤æ‚åº¦æƒé‡
        "coverage": 0.10          // è¦†ç›–ç‡æƒé‡
      },
      "thresholds": {
        "P0": 8.0,  // åˆ†æ•° â‰¥8.0 = P0 (å¿…é¡»æµ‹è¯•)
        "P1": 6.5,  // åˆ†æ•° 6.5-7.9 = P1 (é«˜ä¼˜å…ˆçº§)
        "P2": 5.0   // åˆ†æ•° 5.0-6.4 = P2 (ä¸­ç­‰ä¼˜å…ˆçº§), <5.0 = P3
      },
      "coverageTarget": 100  // ç›®æ ‡è¦†ç›–ç‡ 100%
    }
    // ... å…¶ä»–å±‚çº§é…ç½®
  }
}
```

---

## ğŸ“Š ä¼˜å…ˆçº§è¯´æ˜

| ä¼˜å…ˆçº§ | åˆ†æ•°èŒƒå›´ | æè¿° | å»ºè®®æ“ä½œ |
|--------|----------|------|----------|
| **P0** | â‰¥8.0 | å¿…é¡»æµ‹è¯• | ç«‹å³ç”Ÿæˆ |
| **P1** | 6.5-7.9 | é«˜ä¼˜å…ˆçº§ | æ‰¹é‡ç”Ÿæˆ |
| **P2** | 5.0-6.4 | ä¸­ç­‰ä¼˜å…ˆçº§ | å®¡æŸ¥åç”Ÿæˆ |
| **P3** | <5.0 | ä½ä¼˜å…ˆçº§ | å¯é€‰è¦†ç›– |

---

## ğŸ—ï¸ åˆ†å±‚æ¶æ„

### 1. Foundation Layerï¼ˆåŸºç¡€å±‚ï¼‰
- **ç‰¹å¾**: å·¥å…·å‡½æ•°ã€åŠ©æ‰‹å‡½æ•°ã€å¸¸é‡
- **æƒé‡**: é«˜å¯æµ‹è¯•æ€§æƒé‡ (45%)
- **é˜ˆå€¼**: P0 â‰¥ 8.0
- **ç›®æ ‡è¦†ç›–ç‡**: 100%

### 2. Business Logic Layerï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰
- **ç‰¹å¾**: æœåŠ¡ã€APIã€æ•°æ®å¤„ç†
- **æƒé‡**: å¹³è¡¡çš„å¤šç»´åº¦è¯„åˆ†
- **é˜ˆå€¼**: P0 â‰¥ 7.5
- **ç›®æ ‡è¦†ç›–ç‡**: 80%

### 3. State Management Layerï¼ˆçŠ¶æ€ç®¡ç†å±‚ï¼‰
- **ç‰¹å¾**: çŠ¶æ€å­˜å‚¨ã€ä¸Šä¸‹æ–‡ã€Reducers
- **æƒé‡**: å¼ºè°ƒé”™è¯¯é£é™©
- **é˜ˆå€¼**: P0 â‰¥ 7.0
- **ç›®æ ‡è¦†ç›–ç‡**: 70%

### 4. UI Components Layerï¼ˆUI ç»„ä»¶å±‚ï¼‰
- **ç‰¹å¾**: React ç»„ä»¶ã€è§†å›¾
- **æƒé‡**: å¹³è¡¡å¤æ‚åº¦å’Œé”™è¯¯é£é™©
- **é˜ˆå€¼**: P0 â‰¥ 6.5
- **ç›®æ ‡è¦†ç›–ç‡**: 60%

---

## ğŸ“ˆ è¯„åˆ†æŒ‡æ ‡è¯´æ˜

### Coverage Scoreï¼ˆè¦†ç›–ç‡è¯„åˆ†ï¼‰

**æ–°ç‰¹æ€§**: é›†æˆä»£ç è¦†ç›–ç‡æ•°æ®ï¼Œé€‚ç”¨äºå¢é‡å’Œç°æœ‰ä»£ç åœºæ™¯

- **è¯„åˆ†æ˜ å°„**:
  - 0% â†’ 10åˆ†ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼Œæ€¥éœ€æµ‹è¯•ï¼‰
  - 1-40% â†’ 8åˆ†ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰
  - 41-70% â†’ 6åˆ†ï¼ˆä¸­ç­‰ä¼˜å…ˆçº§ï¼‰
  - 71-90% â†’ 3åˆ†ï¼ˆä½ä¼˜å…ˆçº§ï¼‰
  - 91-100% â†’ 1åˆ†ï¼ˆå·²å……åˆ†è¦†ç›–ï¼‰
  - N/A â†’ 5åˆ†ï¼ˆæ— æ•°æ®ï¼‰

### Testabilityï¼ˆå¯æµ‹è¯•æ€§ï¼‰

- **çº¯å‡½æ•°**: 10/10ï¼ˆæ— å‰¯ä½œç”¨ï¼Œæ˜“äºæµ‹è¯•ï¼‰
- **ç®€å• Mock**: 8-9/10ï¼ˆä¾èµ–æ˜“äº Mockï¼‰
- **å¤æ‚ä¾èµ–**: 4-6/10ï¼ˆéœ€è¦å¤æ‚çš„æµ‹è¯•è®¾ç½®ï¼‰

### Dependency Countï¼ˆä¾èµ–æ•°é‡ï¼‰

åŸºäºå¼•ç”¨è®¡æ•°ï¼š
- **â‰¥10 ä¸ªæ¨¡å—å¼•ç”¨**: 10/10ï¼ˆæ ¸å¿ƒæ¨¡å—ï¼‰
- **5-9 ä¸ªæ¨¡å—**: 10/10
- **3-4 ä¸ªæ¨¡å—**: 9/10
- **1-2 ä¸ªæ¨¡å—**: 7/10
- **æ— å¼•ç”¨**: 5/10

### Complexityï¼ˆå¤æ‚åº¦ï¼‰

- **åœˆå¤æ‚åº¦**: 11-15 â†’ 10/10ï¼ˆä¸­ç­‰å¤æ‚åº¦ï¼Œå€¼å¾—æµ‹è¯•ï¼‰
- **è®¤çŸ¥å¤æ‚åº¦**: é€šè¿‡ ESLint åˆ†æ
- **åµŒå¥—æ·±åº¦**: è°ƒæ•´å¤æ‚åº¦åˆ†æ•°

---

## ğŸ¤– AI é›†æˆ

### ä½¿ç”¨ Cursor Agentï¼ˆæ¨èï¼‰

```bash
# è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ï¼ˆå†…ç½® Cursor Agent é›†æˆï¼‰
ai-test generate -n 10
```

### ä½¿ç”¨å…¶ä»– AI å·¥å…·ï¼ˆChatGPTã€Claudeï¼‰

```bash
# 1. ç”Ÿæˆ AI prompt
ai-test scan
grep "| TODO |" reports/ut_scores.md | head -10

# 2. æ‰‹åŠ¨å¤åˆ¶å‡½æ•°ä¿¡æ¯åˆ° AI å·¥å…·
# 3. ä¿å­˜ AI å“åº”åˆ°æ–‡ä»¶
# 4. è¿è¡Œæµ‹è¯•éªŒè¯
npm test
```

---

## ğŸ¬ å®Œæ•´å·¥ä½œæµç¤ºä¾‹

```bash
# 1. å®‰è£… Jestï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰
npm i -D jest@29 ts-jest@29 @types/jest@29 jest-environment-jsdom@29

# 2. åˆå§‹åŒ–é…ç½®
ai-test init

# 3. (å¯é€‰) ç”Ÿæˆæµ‹è¯•è§„èŒƒ
ai-test init-best-practices

# 4. æ‰«æä»£ç 
ai-test scan
# âœ… è‡ªåŠ¨ç”Ÿæˆé…ç½®æ–‡ä»¶
# âœ… è‡ªåŠ¨è¿è¡Œè¦†ç›–ç‡åˆ†æ
# âœ… ç”Ÿæˆä¼˜å…ˆçº§æŠ¥å‘Š

# 5. æŸ¥çœ‹æŠ¥å‘Š
cat reports/ut_scores.md

# 6. ç”Ÿæˆæµ‹è¯•ï¼ˆ10ä¸ªå‡½æ•°ï¼‰
ai-test generate

# 7. æŸ¥çœ‹ç»“æœ
npm test

# 8. ç»§ç»­ä¸‹ä¸€æ‰¹
ai-test generate -n 10

# 9. é‡å¤ç›´åˆ°æ‰€æœ‰é«˜ä¼˜å…ˆçº§æµ‹è¯•å®Œæˆ
```

---

## ğŸ› ï¸ é«˜çº§ç”¨æ³•

### Jest ç¯å¢ƒè¦æ±‚

é¦–æ¬¡ä½¿ç”¨éœ€è¦å®‰è£… Jestï¼š

```bash
npm i -D jest@29 ts-jest@29 @types/jest@29 jest-environment-jsdom@29
```

ç„¶ååœ¨ `tsconfig.json` ä¸­æ·»åŠ ç±»å‹æ”¯æŒï¼š

```json
{
  "compilerOptions": {
    "typeRoots": ["node_modules/@types"]
  }
}
```

### è‡ªå®šä¹‰è¦†ç›–ç‡å‘½ä»¤

ä¿®æ”¹ `ai-test.config.jsonc`ï¼š

```jsonc
{
  "coverage": {
    "runBeforeScan": true,
    "command": "npm run test:coverage"  // è‡ªå®šä¹‰å‘½ä»¤
  }
}
```

### è·³è¿‡ Git åˆ†æ

å¦‚æœé¡¹ç›®æ²¡æœ‰ Git å†å²æˆ–ä¸éœ€è¦ Git ä¿¡å·ï¼š

```bash
ai-test scan --skip-git
```

---

## ğŸ”§ é¡¹ç›®ç»“æ„

```
ai-test-generator/
â”œâ”€â”€ src/                         # TypeScript æºä»£ç 
â”‚   â”œâ”€â”€ cli.ts                  # CLI å…¥å£
â”‚   â”œâ”€â”€ types/                  # ç±»å‹å®šä¹‰ (5 æ¨¡å—)
â”‚   â”œâ”€â”€ shared/                 # å…±äº«å·¥å…·å±‚ (4 æ¨¡å—)
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒåˆ†æå¼•æ“
â”‚   â”‚   â”œâ”€â”€ scanner.ts         # AST æ‰«æ
â”‚   â”‚   â”œâ”€â”€ git-analyzer.ts    # Git å†å²åˆ†æ
â”‚   â”‚   â”œâ”€â”€ scoring/           # è¯„åˆ†ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ mock/              # Mock åˆ†æ (v3.1.0: ç®€åŒ–ç‰ˆ)
â”‚   â”‚   â””â”€â”€ behavior/          # è¡Œä¸ºåˆ†ç±»
â”‚   â”œâ”€â”€ ai/                     # AI äº¤äº’å±‚
â”‚   â”‚   â”œâ”€â”€ prompt-builder.ts  # Prompt æ„å»º
â”‚   â”‚   â”œâ”€â”€ client.ts          # Cursor Agent è°ƒç”¨
â”‚   â”‚   â”œâ”€â”€ extractor.ts       # æµ‹è¯•æå–
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ testing/                # æµ‹è¯•æ‰§è¡Œå±‚
â”‚   â”‚   â”œâ”€â”€ runner.ts          # Jest è¿è¡Œå™¨
â”‚   â”‚   â”œâ”€â”€ validator.ts       # ğŸ†• v3.1.0: æµ‹è¯•éªŒè¯å™¨
â”‚   â”‚   â”œâ”€â”€ deduplicator.ts    # ğŸ†• v3.1.0: æµ‹è¯•å»é‡
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ workflows/              # å·¥ä½œæµç¼–æ’å±‚
â”‚   â”‚   â”œâ”€â”€ init.ts            # åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ scan.ts            # æ‰«æ
â”‚   â”‚   â”œâ”€â”€ generate.ts        # ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ init-best-practices.ts  # ğŸ†• v3.1.0: Best Practices
â”‚   â”‚   â”œâ”€â”€ generate-with-validation.ts  # ğŸ†• v3.1.0: å¸¦éªŒè¯çš„ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ coverage-driven-generate.ts  # ğŸ†• v3.1.0: è¦†ç›–ç‡é©±åŠ¨
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ utils/                  # å·¥å…·å±‚
â”‚       â”œâ”€â”€ config-manager.ts  # é…ç½®ç®¡ç†
â”‚       â””â”€â”€ ...
â”œâ”€â”€ dist/                        # ç¼–è¯‘åçš„ä»£ç 
â”œâ”€â”€ templates/                   # é…ç½®æ¨¡æ¿
â”‚   â”œâ”€â”€ default.config.jsonc    # é»˜è®¤é…ç½®
â”‚   â””â”€â”€ jest.config.cobertura.js
â””â”€â”€ package.json
```

### æ¶æ„åŸåˆ™

- **åˆ†å±‚è®¾è®¡**: æ ¸å¿ƒåˆ†æã€AI äº¤äº’ã€æµ‹è¯•ã€å·¥ä½œæµä¹‹é—´æ¸…æ™°åˆ†ç¦»
- **æ ¸å¿ƒé›¶ AI ä¾èµ–**: æ ¸å¿ƒæ¨¡å—å¯åœ¨æ—  AI çš„æƒ…å†µä¸‹ä½¿ç”¨
- **æ¨¡å—åŒ–å¯¼å‡º**: æ¯ä¸€å±‚éƒ½æœ‰æ¸…æ™°çš„ API å¯¼å‡º
- **å¯ç¼–ç¨‹ API**: æ‰€æœ‰å·¥ä½œæµéƒ½å¯ä»¥å¯¼å…¥å¹¶ç¼–ç¨‹ä½¿ç”¨

---

## ğŸ¯ v3.1.0 æ›´æ–°å†…å®¹

### ç§»é™¤çš„åŠŸèƒ½
- âŒ **Boundary Detection**ï¼ˆè¾¹ç•Œæ£€æµ‹ï¼‰- è¿‡åº¦è®¾è®¡ï¼Œå·²ç§»é™¤ (-583è¡Œ)
- âŒ **Mock ä»£ç ç¤ºä¾‹ç”Ÿæˆ** - é™åˆ¶AIè‡ªç”±åº¦ï¼Œå·²ç®€åŒ– (-320è¡Œ)

### æ–°å¢çš„åŠŸèƒ½
- âœ… **Best Practices ç”Ÿæˆ** - AIç†è§£é¡¹ç›®é£æ ¼
- âœ… **å®æ—¶ä»£ç éªŒè¯** - ç¡®ä¿ç”Ÿæˆä»£ç å¯è¿è¡Œ
- âœ… **æµ‹è¯•å»é‡** - æé«˜æµ‹è¯•è´¨é‡
- âœ… **è¦†ç›–ç‡é©±åŠ¨** - æ™ºèƒ½è¿­ä»£

### è®¾è®¡ç†å¿µå˜åŒ–

**ç§»é™¤ç†ç”±**:
1. **é™æ€åˆ†æçš„å±€é™**: æ— æ³•ç†è§£ä¸šåŠ¡é€»è¾‘
2. **è¿‡åº¦æŒ‡å¯¼**: é™åˆ¶ AI çš„åˆ›é€ åŠ›
3. **æŠ€æœ¯æ ˆå‡è®¾**: ä¸åº”è¯¥å‡è®¾ç”¨æˆ·ä½¿ç”¨ä»€ä¹ˆåº“
4. **ä»£ç è†¨èƒ€**: ç»´æŠ¤æˆæœ¬é«˜ï¼Œå®é™…ä»·å€¼ä½

**æ–°å¢ç†ç”±**:
1. **å®é™…ä»·å€¼**: è§£å†³çœŸå®ç—›ç‚¹
2. **ä¸šç•ŒéªŒè¯**: Qodoã€Keploy å·²è¯æ˜æœ‰æ•ˆ
3. **AI Native**: å……åˆ†å‘æŒ¥ AI èƒ½åŠ›
4. **ç”¨æˆ·éœ€æ±‚**: å¯é€‰å¯ç”¨ï¼Œä¸å¼ºåˆ¶

---

## ğŸ“š çµæ„Ÿæ¥æº

æœ¬é¡¹ç›®ä»ä»¥ä¸‹ç ”ç©¶å’Œå®è·µä¸­æ±²å–çµæ„Ÿï¼š

- **Meta TestGen-LLM**: è´¨é‡ä¿è¯è¿‡æ»¤å™¨å’Œå¤§è§„æ¨¡å®è·µ  
  [Automated Unit Test Improvement using Large Language Models at Meta](https://arxiv.org/abs/2402.09171)

- **Qodo Cover**: Best Practicesã€å®æ—¶éªŒè¯  
  https://www.qodo.ai/

- **Keploy**: æµ‹è¯•å»é‡ã€è¦†ç›–ç‡é©±åŠ¨  
  https://keploy.io/

- **ByteDance Midscene.js**: è‡ªç„¶è¯­è¨€æ¥å£å’Œç¨³å®šæ€§å®è·µ  
  https://github.com/web-infra-dev/midscene

è¿™äº›ç†å¿µåœ¨ `ai-test-generator` ä¸­ä½“ç°ä¸ºï¼š
- ä¸¥æ ¼çš„è¾“å‡ºåè®®ï¼ˆJSON manifest + ä»£ç å—ï¼‰
- å¤±è´¥åé¦ˆå¾ªç¯ï¼ˆJest JSON â†’ å¯æ“ä½œæç¤º â†’ ä¸‹ä¸€ä¸ª promptï¼‰
- æ‰¹å¤„ç†ä¸è¿›åº¦è¿½è¸ªï¼ˆTODO/DONE/SKIPï¼‰
- è¦†ç›–ç‡æ„ŸçŸ¥ä¼˜å…ˆçº§

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æäº¤é—®é¢˜æˆ–æ‹‰å–è¯·æ±‚ã€‚

---

## ğŸ“„ è®¸å¯è¯

MIT Â© YuhengZhou

---

## ğŸ”— é“¾æ¥

- [npm åŒ…](https://www.npmjs.com/package/ai-unit-test-generator)
- [æ›´æ–°æ—¥å¿—](./CHANGELOG.md)
- [GitHub](https://github.com/YuhengZhou/ai-unit-test-generator)

---

## ğŸ’¬ æ”¯æŒ

éœ€è¦å¸®åŠ©ï¼Ÿé€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–æ”¯æŒï¼š

- æŸ¥çœ‹ [æ›´æ–°æ—¥å¿—](./CHANGELOG.md)
- æäº¤ [GitHub Issues](https://github.com/YuhengZhou/ai-unit-test-generator/issues)

---

**æç¤º**: é¦–æ¬¡ä½¿ç”¨å»ºè®®å…ˆåœ¨å°é¡¹ç›®ä¸Šæµ‹è¯•ï¼Œç†Ÿæ‚‰å·¥ä½œæµåå†åº”ç”¨åˆ°å¤§é¡¹ç›®ã€‚
